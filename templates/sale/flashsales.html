{% extends "base.html" %}
{% load static %}

{% block content %}
  <div class="w-full bg-orange-50 py-6">
    <div class="max-w-[1320px] mx-auto px-4">
        <img src="{% static 'images/flashsales.jpg' %}" class="w-full h-48 md:h-72 object-cover rounded-xl" />
    </div>
  </div>
  <div class="max-w-[1320px] mx-auto mt-6 px-4">
    <h1 class="text-3xl font-bold text-orange-600 mb-4">Flash Sale</h1>
  </div>
  <div class="max-w-[1320px] mx-auto px-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6">
    {% for item in sales %}
      <div class="bg-white shadow-lg rounded-xl p-3 hover:shadow-xl transition">
        <a href="{{ item.product.get_url }}">
            <img src="{{ item.product.image.url }}" class="h-48 w-full object-cover rounded-lg">
        </a>
        <h3 class="mt-2 font-semibold text-gray-700">

            {{ item.product.product_name }}
        </h3>

        <p class="mt-1 text-orange-600 font-bold text-xl">

            {{ item.discount_price }} TK
            <del class="text-gray-500 text-sm">{{ item.product.price }} TK</del>
        </p>

        <a href="{% url 'add_cart' item.product.id %}" class="block text-center bg-orange-600 text-white py-2 rounded-lg mt-2">Add to Cart</a>

      </div>
    {% endfor %}
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
        let totalSeconds = 60 * 60; // 60 minutes

        function updateTimer() {
            let minutes = Math.floor(totalSeconds / 60);
            let seconds = totalSeconds % 60;

            document.getElementById("countdown-timer").textContent =
                `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

            if (totalSeconds > 0) {
                totalSeconds--;
            }
        }

        updateTimer(); // initial load
        setInterval(updateTimer, 1000);
    });
  </script>
{% endblock %}

